/*
  Copyright 2019 Google LLC

  Use of this source code is governed by an MIT-style
  license that can be found in the LICENSE file or at
  https://opensource.org/licenses/MIT.
*/

import {errors} from './errors';
import {ManifestEntry} from '../types';

type AdditionalManifestEntriesTransform = {
  (manifest: Array<ManifestEntry & {size: number}>): {
    manifest: Array<ManifestEntry & {size: number}>;
    warnings: string[];
  };
};

export function additionalManifestEntriesTransform(
  additionalManifestEntries: Array<ManifestEntry | string>,
): AdditionalManifestEntriesTransform {
  return (manifest: Array<ManifestEntry & {size: number}>) => {
    const warnings: Array<string> = [];
    const stringEntries = new Set<string>();

    for (const additional